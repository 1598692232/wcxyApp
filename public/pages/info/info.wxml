
<view class="section tc" style="height: {{scrollHeightAll}}px">
  <video id="myVideo" class="info-video" src="{{url}}" enable-danmu controls objectFit="cover" 
  autoplay bindtimeupdate="getVideoTime" bindpause="getVideoTime2" muted="{{muted}}" bindfullscreenchange="handleFullScreen">
    <cover-view class="video-select-btn-p" catchtap="showPSelect" wx:if="{{fullScreen && !videoClicked}}">
        {{pNo}}P
    </cover-view>
    <cover-view bindtap="hidePselect" class="video-cover" wx:if="{{fullScreen && videoClicked}}">
        <cover-view class="video-select-p-list">
            <!-- <cover-view style="display:table;width:100%;height:100%"> -->
                <cover-view class="video-select-table" style="height:{{ps.length * 44}}px;margin-top: -{{ps.length * 44 / 2}}px">
                    <cover-view wx:for="{{ps}}" wx:key="index" catchtap="changeP" style="color:{{item.activeP ? '#1144d5': ''}}"
                    data-resolution="{{item.resolution}}" class="video-select-p-li" data-type="video">
                        {{item.resolution}}
                    </cover-view>
                </cover-view>
            <!-- </cover-view> -->
        </cover-view>

    </cover-view>
       
  </video>
  <view class="video-info">
      <view class="video-title">
          <!-- <text>{{name}}</text> -->
          <view class="select-version-p" bindtap="selectVersionAndP" id="version-select" data-id="version-select">
              <image src="./bg1.png" mode="scaleToFill"></image>
              <text>v{{versionNo}}版本</text>
          </view>
          <view class="select-version-p" bindtap="selectVersionAndP" id="p-select" data-id="p-select">
              <image src="./bg2.png" mode="scaleToFill"></image>
              <text>{{pNo}}P</text>
          </view>
      </view>
      <view class="video-author">{{username}} · {{createTime}}</view>
  </view>
<<<<<<< HEAD
=======
  <view class="push-comment">
        <form bindsubmit="sendComment">
           <view class="push-comment-input clearfix">
               <input placeholder="发表评论..." cursor-spacing="20" bindblur="commentBlur" name="commentText" style="color:#fff"
               bindfocus="commentFocus" animation="{{animationData}}" value="{{commentText}}" fixed="{{true}}" /> 
               <!-- hidden="{{hideSendComment}}" -->
               <button class="send-commit" form-type="submit">
                   发送
               </button>
           </view>
         </form>
       </view>
  <!-- bindscrolltolower="loadMore" -->
>>>>>>> hotfix_20171026
  <scroll-view scroll-y="true" style="height: {{scrollHeight}}px" class="list-body">
    <view wx:if="{{commentList.length > 0}}">
    <!-- 评论 -->
    <view class="comment-body" wx:for="{{commentList}}" wx:key="index" style="background-color:{{item.background}}" >
        <!-- 评论区 -->
        <view class="comment-master {{item.delTranstion}}" bindtouchstart="delTouchStart" bindtouchmove="delTouchMove"  bindtouchend="delTouchEnd" style="transform: translateX({{item.translateX}}px);" data-index="{{index}}">
          <view class="comment-tou">
            <image src="{{item.avatar}}"></image>
          </view>
          <view class="comment-master-text" bindtap="toVideoPosition" data-time="{{item.media_time}}" data-index="{{index}}">
              <view class="comment-header clearfix">
                  <text class="comment-name">{{item.realname}}</text>
                  <text class="comment-timer">{{item.comment_time}}</text>
              </view>
              <view class="comment-body1">
                 <text>{{item.content}} </text>
                 <view class="comment-do clearfix">
                   <text catchtap="toBackPage" data-index="{{item.id}}" data-doc-id="{{doc_id}}" data-avatar="{{item.avatar}}">回复</text>
                 </view>
              </view>
          </view>
           <view class='comment-del' bindtap="handleDelComment" data-index="{{index}}" style="background: {{item.delColor}}" data-userid="{{item.user_id}}">
              删除
          </view>
        </view>

        <!-- 回复区 -->
        <view class="comment-back" wx:if="{{item.replies.length > 0}}" catchtap="toBackPage" data-index="{{item.id}}" data-doc-id="{{doc_id}}" data-avatar="{{item.avatar}}">
            <text class="comment-look-back" wx:if="{{item.replies.length > 1}}">查看{{item.replies.length - 1}}条往期的回复</text>
            <view class="back-body">
                <view class="back-tou">
                    <image src="{{item.replies[item.replies.length - 1].avatar != '' ? item.replies[item.replies.length - 1].avatar : tx}}"></image>
                </view>

                <view class="back-info">
                    <text class="back-name">{{item.replies[item.replies.length - 1].realname}}</text>
                    <text class="back-text">{{item.replies[item.replies.length - 1].content}}</text>
                </view>
            </view>
        </view>
    </view>
    <!-- 评论 end -->
      
    </view>

    <view wx:if="{{commentList.length == 0}}" class="sofa">
        ～暂无评论，抢沙发！！～
    </view>


  </scroll-view>

<<<<<<< HEAD
  <view class="push-comment">
   <form bindsubmit="sendComment">
      <view class="push-comment-input clearfix">
          <input placeholder="发表评论..." cursor-spacing="20" bindblur="commentBlur" name="commentText" style="color:#fff"
          bindfocus="commentFocus" animation="{{animationData}}" value="{{commentText}}" fixed="{{true}}" /> 
          <button class="send-commit" form-type="submit">
              发送
          </button>
      </view>
    </form>
  </view>
=======
>>>>>>> hotfix_20171026


</view>


<view class="info-cover" wx:if="{{versionSelect || PSelect}}" bindtap="hideSelect"> 
    <view class="info-cover-select select-ani-one" wx:if="{{versionSelect}}" style="top: {{selectY}}px;width: {{selectWidth}}px">
        <view class="info-arrow" style="left: {{arrowX}}px"></view>
        <scroll-view class="version-p-list" scroll-y>
          <view class="version-p-li" wx:for="{{versions}}" wx:key="index" bindtap="changeVersion" 
            data-id="{{item.doc_id}}" data-index="{{index + 1}}" style="border-bottom:{{index == versions.length -1 ? '0' : ''}}">
            <view class="version-name" style="color:{{item.activeVersion ? '#1144d5': ''}}">V{{index + 1}}版本</view>
            <view class="video-name" style="color:{{item.activeVersion ? '#1144d5': ''}}">{{info.name}}</view>
          </view>
        </scroll-view>
    </view>


    <view class="info-cover-select select-ani-two"  wx:if="{{PSelect}}" style="top: {{selectY}}px;width: {{selectWidth}}px">
        <view class="info-arrow" style="left: {{arrowX}}px"></view>
        <scroll-view class="version-p-list" scroll-y>
          <view class="version-p-li" wx:for="{{ps}}" wx:key="index" bindtap="changeP"  data-resolution="{{item.resolution}}"
            style="border-bottom:{{index == ps.length -1 ? '0' : ''}}">
            <view class="version-name" style="color:{{item.activeP ? '#1144d5': ''}}">{{item.resolution}}P</view>
            <view class="video-name" style="color:{{item.activeP ? '#1144d5': ''}}">{{info.name}}</view>
          </view>
        </scroll-view>
    </view>
</view>



<!-- <view class="section tc">
  <video id="myVideo2"  class="info-video" src="http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&bizid=1023&hy=SH&fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400" objectFit="cover" autoplay="{{true}}" enable-danmu controls>
    <cover-view class="controls" catchtap="toggleControl">
      <cover-view class="controls-content"  hidden="{{controlBodyHidden}}">
        <cover-view class="do-block">
            <cover-image class="qp-img" src="./img/qp.png" catchtap="toFullScreen" hidden="{{isFullScreen}}" />
            <cover-image class="qp-img" src="./img/qp.png" catchtap="exitFullScreen" hidden="{{!isFullScreen}}"/>
            <cover-image class="qp-img" src="./img/share.png" />
        </cover-view>
        <cover-view  class="controls-body">
          <cover-view class="play" catchtap="play" hidden="{{playHidden}}">
            <cover-image class="img" src="./img/play.png" />
          </cover-view>
          <cover-view class="pause" catchtap="pause" hidden="{{pauseHidden}}">
            <cover-image class="img" src="./img/pause.png" />
          </cover-view>
        </cover-view>

      </cover-view>

    </cover-view>
      
  </video>

  <view>
    <view>
      <text></text>
      <text></text>
    </view>
  </view>
</view>
 -->