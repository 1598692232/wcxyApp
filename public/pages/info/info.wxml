
<view class="section tc" style="height: {{scrollHeightAll}}px"  wx:if="{{!passwordModal}}">
  <video id="myVideo" class="info-video" src="{{url}}" enable-danmu controls objectFit="contain" bindplay="listenerPlay"
  autoplay bindtimeupdate="getVideoTime" bindpause="getVideoTime2" muted="{{true}}" bindfullscreenchange="handleFullScreen">
    <cover-view class="video-select-btn-p" catchtap="showPSelect" wx:if="{{fullScreen && !videoClicked}}">
        {{pNo}}P
    </cover-view>
    <cover-view bindtap="hidePselect" class="video-cover" wx:if="{{fullScreen && videoClicked}}">
        <cover-view class="video-select-p-list">
            <!-- <cover-view style="display:table;width:100%;height:100%"> -->
                <cover-view class="video-select-table" style="height:{{ps.length * 44}}px;margin-top: -{{ps.length * 44 / 2}}px">
                    <cover-view wx:for="{{ps}}" wx:key="index" catchtap="changeP" style="color:{{item.activeP ? '#1144d5': ''}}"
                    data-resolution="{{item.resolution}}" class="video-select-p-li" data-type="video">
                        {{item.resolution}}
                    </cover-view>
                </cover-view>
            <!-- </cover-view> -->
        </cover-view>
    </cover-view>

    <cover-view class="cover-focus" wx:if="{{isFocus}}" bindtap="commentBlur"></cover-view>  
  </video>

  <!--  wx:if="{{isFocus || cavansShow}}" -->
  <canvas style="width: 100%; height: {{firstCanvasHeight}}px; position: fixed; top: 0;left: 0;"
   canvas-id="firstCanvas" id="firstCanvas" wx:if="{{isFocus || cavansShow}}" bindtouchstart="firstCanvasTouchstart"></canvas>
    <!--  wx:if="{{isFocus}}" -->
    <canvas style="width: 100%; height: {{firstCanvasHeight}}px; position: fixed; top: 0;left: 0;" 
            id="secondCanvas" canvas-id="secondCanvas"
            canvas-id="secondCanvas"
            bindtouchstart="drawStart"
            bindtouchmove="drawMove"
            bindtouchend="drawend"
            disable-scroll="true"
            wx:if="{{isFocus}}"
            ></canvas>
          <!-- catchtap="catap" -->
    <!-- 画图控制器 -->
    <canvas style="width: 100%; height: 36px; position: fixed; top: 211px;left: 0; z-index: 1000;"
            canvas-id="thirdCanvas" id="thirdCanvas" 
            disable-scroll="true"
            bindtouchstart="thirdDrawStart"
            bindtouchmove="thirdDrawMove"
            bindtouchend="thirdDrawend"
            wx:if="{{isFocus}}" 
    ></canvas>
            <!--  wx:if="{{isFocus}}" -->

    <view class="video-info" style="height: {{isFocus ? 36 : 60}}px;margin-top: -5px;background: #383b49">

        <view class="video-make">
            <view class="video-make-li" bindtap="toggleSelect" data-show="{{true}}" data-field="statusSelectShow" data-animation="animationSelect">
                <view class="video-make-status">审核通过</view>
                <view class="video-make-arrow"></view>
            </view>
            <view class="video-make-li" bindtap="toggleSelect" data-show="{{true}}" data-field="versionSelectShow" data-animation="animationSelect2">
                <view class="video-make-status">V1版本</view>
                <view class="video-make-arrow"></view>
            </view>
        </view>


      <view class="video-author">{{username}} · {{createTime}}</view>

      <!-- wx:if="{{isFocus}}" -->
      <view class="label-control" wx:if="{{isFocus}}">
        <view class="label-body">  
            <view class="label-type">
                <view class="label-img" wx:for="{{drawType}}" wx:key="index" bindtap="selectDrawType" data-key="{{index}}" id="draw-control{{index}}" >
                        <image src="{{item.activeImg}}" mode="aspectFit" wx:if="{{drawTypeActive == item.name}}"></image>  
                        <image src="{{item.img}}" mode="aspectFit" wx:else></image>         
                </view>  
            </view>

            <!-- noSelectColors -->
            <view class="label-color">
                <view class="label-color-li"  wx:for="{{colors}}" wx:key="index" data-key="{{index}}"  
                catchtap="selectColor" id="draw-control{{index + 6}}">
                    <view class="label-color-block-select">
                        <block wx:if="{{item == colorActive}}">
                            <view class="label-color-select active" style="background-color:{{item}}; box-shadow: 0 0 3px {{item}};">
                            </view>
                        </block>
                        <block wx:else>
                            <view class="label-color-select" style="background-color:{{item}}">
                            </view>
                        </block>
                        
                    </view>
                </view>
            </view>
        </view>
      </view>
  </view>

  <view class="push-comment send-comment">
        <form bindsubmit="sendComment">
           <view class="push-comment-input clearfix">
               <input placeholder="发表评论..." cursor-spacing="10" name="commentText" style="color:#fff" bindinput="changeBtn"
               bindfocus="commentFocus" bindblur="commentBlur" value="{{commentText}}" fixed="{{true}}" focus="{{isFocus}}"/> 
               <!-- hidden="{{hideSendComment}}" -->
               <!-- <button class="send-commit" form-type="submit" style="background: {{sendCommentBtnStyle}}">
                   发送
               </button> -->
           </view>
        </form>
    </view>
    <view class="comment-footer" wx:if="{{isFocus}}">
        <!-- <canvas style="width: 100%; height: 30px; position: absolute; top: 0;left: 0; z-index: 1000;"
            canvas-id="fourCanvas" id="fourCanvas" 
            disable-scroll="true"
            bindtouchstart="thirdDrawStart"
            bindtouchmove="thirdDrawMove"
            bindtouchend="thirdDrawend"
            wx:if="{{isFocus}}" 
        ></canvas> -->
        <view class="comment-footer-left">
            取消
        </view>
        <view class="comment-footer-right">
            发送
        </view>
    </view>

  <!-- bindscrolltolower="loadMore" -->
  <scroll-view scroll-y="true" style="height: {{scrollHeight}}px" class="list-body">
   
    <view wx:if="{{commentList.length > 0}}">
            <view class="list-body-cover" wx:if="{{isFocus}}"></view>
    <!-- 评论 -->
    <view class="comment-body" wx:for="{{commentList}}" wx:key="index" style="background-color:{{item.background}}" >
        <!-- 评论区 -->
        <view class="comment-master {{item.delTranstion}}" bindtouchstart="delTouchStart" bindtouchmove="delTouchMove"  bindtouchend="delTouchEnd" style="transform: translateX({{item.translateX}}px);" data-index="{{index}}">
          <view class="comment-tou">
            <image src="{{item.avatar}}"></image>
          </view>
          <view class="comment-master-text" data-time="{{item.media_time}}" data-index="{{index}}" data-id="{{item.id}}"  bindtap="toVideoPosition">
              <view class="comment-header clearfix">
                  <text class="comment-name" style="color: {{item.nameColor ? item.nameColor : ''}}">{{item.realname}}</text>
                  <text class="comment-timer" style="background: {{item.timeBackground ? item.timeBackground : ''}}">{{item.comment_time}}</text>
              </view>
              <view class="comment-body1">
                 <text>{{item.content}} </text>
                 <view class="comment-do clearfix">
                   <text catchtap="toBackPage" data-index="{{item.id}}" data-doc-id="{{doc_id}}" data-avatar="{{item.avatar}}">回复</text>
                 </view>
              </view>
          </view>
           <view class='comment-del' bindtap="handleDelComment" data-index="{{index}}" style="background: {{item.delColor}}" data-userid="{{item.user_id}}">
              删除
          </view>
        </view>

        <!-- 回复区 -->
        <view class="comment-back" wx:if="{{item.replies.length > 0}}" catchtap="toBackPage" data-index="{{item.id}}" data-doc-id="{{doc_id}}" data-avatar="{{item.avatar}}">
            <text class="comment-look-back" wx:if="{{item.replies.length > 1}}">查看{{item.replies.length - 1}}条往期的回复</text>
            <view class="back-body">
                <view class="back-tou">
                    <image src="{{item.replies[item.replies.length - 1].avatar != '' ? item.replies[item.replies.length - 1].avatar : tx}}"></image>
                </view>

                <view class="back-info">
                    <text class="back-name">{{item.replies[item.replies.length - 1].realname}}</text>
                    <text class="back-text">{{item.replies[item.replies.length - 1].content}}</text>
                </view>
            </view>
        </view>
    </view>
    <!-- 评论 end -->
      
    </view>

    <view wx:if="{{commentList.length == 0}}" class="sofa">
        ～暂无评论，抢沙发！！～
    </view>


  </scroll-view>



</view>

<!-- 选择 -->
<view class="video-action-body" wx:if="{{statusSelectShow}}" bindtap="toggleSelect" data-show="{{false}}" data-field="statusSelectShow" data-animation="animationSelect">
    <view class="video-action" animation="{{animationSelect}}">
        <view class="video-action-sure">
            <view class="video-action-sure-left" bindtap="toggleSelect" data-show="{{false}}" data-field="statusSelectShow" data-animation="animationSelect">取消</view>
            <view class="video-action-sure-right">确定</view>
        </view>
        <picker-view indicator-class="video-action-selcted" style="width: 100%; height: 250px;" mask-class="video-action-mask"
                value="{{statusVal}}" bindchange="statusChange">
            <picker-view-column>
            <view wx:for="{{statusList}}" wx:key="index"  class="video-action-li" style="opacity: {{item == statusList[statusVal[0]] ? 1 : 0.6}}">{{item}}年</view>
            </picker-view-column>
        </picker-view>
    </view>
</view>

<view class="video-action-body" wx:if="{{versionSelectShow}}" bindtap="toggleSelect" data-show="{{false}}" data-field="versionSelectShow" data-animation="animationSelect2">
    <view class="video-action" animation="{{animationSelect2}}">
        <view class="video-action-sure">
            <view class="video-action-sure-left" bindtap="toggleSelect" data-show="{{false}}" data-field="versionSelectShow" data-animation="animationSelect2">取消</view>
            <view class="video-action-sure-right">确定</view>
        </view>
        <picker-view indicator-class="video-action-selcted" style="width: 100%; height: 250px;" mask-class="video-action-mask"
                value="{{versionVal}}" bindchange="versionChange">
            <picker-view-column>
            <view wx:for="{{versionsList}}" wx:key="index"  class="video-action-li" style="opacity: {{item == versionsList[versionVal[0]] ? 1 : 0.6}}">{{item}}年</view>
            </picker-view-column>
        </picker-view>
    </view>
</view>


<view class="info-cover" wx:if="{{versionSelect || PSelect}}" bindtap="hideSelect"> 
    <view class="info-cover-select select-ani-one" wx:if="{{versionSelect}}" style="top: {{selectY}}px;width: {{selectWidth}}px;height:auto;">
        <view class="info-arrow" style="left: {{arrowX}}px"></view>
        <scroll-view class="version-p-list" scroll-y style="max-height:150px;overflow:auto;">
          <view class="version-p-li" wx:for="{{versions}}" wx:key="index" bindtap="changeVersion" 
            data-id="{{item.doc_id}}" data-index="{{index + 1}}" style="border-bottom:{{index == versions.length -1 ? '0' : ''}}">
            <view class="version-name" style="color:{{item.activeVersion ? '#1144d5': ''}}">V{{index + 1}}版本</view>
            <view class="video-name" style="color:{{item.activeVersion ? '#1144d5': ''}}">{{item.name}}</view>
          </view>
        </scroll-view>
    </view>


    <view class="info-cover-select select-ani-two"  wx:if="{{PSelect}}" style="top: {{selectY}}px;width: {{selectWidth}}px;height:auto;">
        <view class="info-arrow" style="left: {{arrowX}}px"></view>
        <scroll-view class="version-p-list" scroll-y style="max-height:150px;overflow:auto;">
          <view class="version-p-li" wx:for="{{ps}}" wx:key="index" bindtap="changeP"  data-resolution="{{item.resolution}}"
            style="border-bottom:{{index == ps.length -1 ? '0' : ''}}">
            <view class="version-name" style="color:{{item.activeP ? '#1144d5': ''}}">{{item.resolution}}P</view>
            <view class="video-name" style="color:{{item.activeP ? '#1144d5': ''}}">{{info.name}}</view>
          </view>
        </scroll-view>
    </view>
</view>

<view class="info-password-cover" wx:if="{{passwordModal}}">
    <view class="info-password-modal">
        <form bindsubmit="enterShareLink">
            <view class="info-password-title">密码</view>
            <view class="info-password-input">
                <input type="text" value="{{linkPassword}}" name="linkPassword"/>
            </view>
            <button form-type="submit">确定</button>
        </form>
    </view>
</view>




